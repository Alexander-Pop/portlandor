uuid: a0214f26-6f4b-4759-99f3-8c63d99e5bdc
langcode: en
status: true
dependencies: {  }
id: send_email_to_reviewer_after_creating_new_content
label: send_email_to_reviewer_after_creating_new_content
events:
  -
    event_name: 'rules_entity_insert:node'
description: 'Send email to the reviewer if the new content is "In review" and has a reviewer assigned.'
tags:
  - ''
config_version: '3'
expression:
  id: rules_rule
  uuid: e7391bcc-6c54-4c58-a69b-bf3b16524031
  conditions:
    id: rules_and
    uuid: f7e90b0e-b5af-4782-b47a-f9f7e8bb6c11
    conditions:
      -
        id: rules_condition
        uuid: 1e5d2c80-5f8f-42f5-8421-41853a67e3a0
        context_values: {  }
        context_mapping:
          node: node
        context_processors: {  }
        provides_mapping: {  }
        condition_id: portland_in_review_and_has_reviewer
        negate: false
  actions:
    id: rules_action_set
    uuid: 01de9426-50ec-42f1-aafc-bbc3ed751647
    actions:
      -
        id: rules_action
        uuid: e4c078ec-500d-4caf-985d-e8f93438bae8
        context_values:
          to:
            - '{{node.field_reviewer.entity.mail.value}}'
          subject: 'Reviewer assignment'
          message: "<div><a href=\"mailto: {{node.revision_uid.entity.mail.value}}\">{{node.revision_uid.entity.name.value}}</a> has assigned you as the reviewer for <a href=\"{{node | entity_url }}\"> {{node.title.value}} </a></div>\r\n<p/>\r\n<div><h3>Revision log:</h3>\r\n{{node.revision_log.value}}</div>\r\n<p/>\r\n<div>Last updated: {{node.changed.value | format_date('custom', 'l Y/n/j g:i A')}} </div>"
          reply: ''
          language: ''
        context_mapping: {  }
        context_processors:
          to:
            rules_tokens: {  }
          subject:
            rules_tokens: {  }
          message:
            rules_tokens: {  }
          reply:
            rules_tokens: {  }
          language:
            rules_tokens: {  }
        provides_mapping: {  }
        action_id: rules_send_email
